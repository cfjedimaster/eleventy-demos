<h1>Post</h1>

<p>Yesterday I <a href="http://www.raymondcamden.com/index.cfm/2011/8/31/Using-ColdFusion-and-Ajax-to-check-for-an-existing-database-record">blogged</a> about using ColdFusion's built in Ajax tools to add server-side database checking to a form. This worked, but I wanted to repeat the process using jQuery on the front end. What's nice is that while the front end may change, the ColdFusion Component I wrote on the back end doesn't have to change at all. Let's look at the new version - and as always - keep in mind that this could be rewritten many different ways.</p>
<!--more-->
<p/>
<code>
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
$(document).ready(function() {
	$("#artist").keyup(function(e) {
		var value = $.trim($("#artist").val());
		if (value != '') {
			$.post("test.cfc?method=checkArtist&returnFormat=json", {n:value}, function(res,code) {
				if (res == true) {
					$("#warning").html("This artist exists.");
					$("#submitBtn").attr("disabled","disabled");
				}
				else {
					$("#warning").html("");
					$("#submitBtn").removeAttr("disabled");
				}
			},"json");
		} else {
			$("#submitBtn").attr("disabled","disabled");
		}
	});
});
&lt;/script&gt;
&lt;/head&gt;
<p>&lt;body&gt;</p>
<p>&lt;form name=&quot;mainForm&quot;&gt;
New Artist: &lt;input name=&quot;artist&quot; id=&quot;artist&quot;&gt;&lt;br/&gt;
&lt;div id=&quot;warning&quot;&gt;&lt;/div&gt;
&lt;input type=&quot;submit&quot; id=&quot;submitBtn&quot; value=&quot;Save&quot; disabled=&quot;disabled&quot;&gt;
&lt;/form&gt;</p>
<p>&lt;/body&gt;
&lt;/html&gt;
</code></p>
<p>
<p>Outside of the code, the only other difference is in the HTML. Previously I made use of cfform, but since I'm not using any client-side code autogenerated from ColdFusion, I switched to vanilla HTML tags. The code block now loads in jQuery and adds a keyup listener to our artist form field. After I get the value - I either do my Ajax post or just disable the submit button. (Note - since this form has a single field it can still be submitted with an enter key. I'm not going to worry about that now.)</p>
<p>
<p>So it's not a lot more code at all. But you do have to handle the binding yourself. It's just one extra line of code though so it's nothing to worry about. You can demo this yourself <a href="http://www.coldfusionjedi.com/demos/aug312011/test2a.cfm">here</a> (remember to use &quot;Weber&quot; as an artist).</p>
}